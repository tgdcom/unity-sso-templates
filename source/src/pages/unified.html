<extends src="layouts/azure-blue.html" locals='{"title": "Sign-in / Sign-up"}'>
  <block name="head">
    <style lang="postcss">
      .main {
        @apply lg:w-[clamp(400px,45ch,100vw)] grow py-16 px-4;
      }

      .aside {
        @apply lg:w-[clamp(400px,45ch,100vw)] py-16 px-4 bg-gray-100;
      }

      .entry-item {
        @apply my-4;
      }

      .divider {
        @apply hidden;
      }

      .forgot-password {
        @apply my-2 text-sm;
      }

      .create {
        @apply my-2;

        a {
          @apply inline-block mx-1;
        }
      }

      .invisible {
        visibility: hidden;
      }

      .js-hide {
        visibility: hidden !important;
      }

      .js-show {
        visibility: visible !important;
      }
    </style>
  </block>
  <block name="body">
    <div class="container max-w-screen-lg mx-auto">
      <div class="flex flex-row flex-wrap gap-4">
        <main id="api" class="main" role="main">
          <!-- @remove in prod -->
          <div class="heading">
            <h1 role="heading">Sign in</h1>
          </div>
          <form
            id="localAccountForm"
            class="localAccount"
            aria-label="Sign in with your email address"
          >
            <div class="intro">
              <h2>Sign in with your email address</h2>
            </div>
            <div class="error pageLevel" aria-hidden="true" role="alert">
              <p></p>
            </div>
            <div class="entry">
              <div class="entry-item">
                <div class="error itemLevel" aria-hidden="true" role="alert">
                  <p></p>
                </div>
                <input
                  type="email"
                  id="email"
                  name="Email Address"
                  title="Please enter a valid email address"
                  pattern="^[a-zA-Z0-9!#$%&amp;'+^_`{}~-]+(?:\.[a-zA-Z0-9!#$%&amp;'+^_`{}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$"
                  autofocus=""
                  placeholder="Email Address"
                  aria-label="Email Address"
                />
              </div>
              <div class="entry-item">
                <div class="password-label"></div>
                <div class="error itemLevel" aria-hidden="true">
                  <p role="alert"></p>
                </div>
                <input
                  type="password"
                  id="password"
                  name="Password"
                  placeholder="Password"
                  aria-label="Password"
                  autocomplete="current-password"
                  aria-required="true"
                />
                <div class="forgot-password center-height">
                  <a
                    id="forgotPassword"
                    href="/unityssotest.onmicrosoft.com/B2C_1_SignUp_SignIn_Web_Dev_English/api/CombinedSigninAndSignup/unified?claimsexchange=ForgotPassword&amp;csrf_token=VWpMUVRzODUvVnRvNThoNVFXZUJrNDVBaTBES0lrZWdTOEJMd2F1M0x0VE1vYStLbWRtZWxrKzlodXVmd0UvQVFJMU5VNWVaQUhBUE9aamRKMXpMMXc9PTsyMDI0LTAzLTI2VDAwOjE5OjIxLjU1NzQzNTVaO0R2STRWMEw5aEk2aFdqSEcweVk2WWc9PTt7Ik9yY2hlc3RyYXRpb25TdGVwIjoxfQ==&amp;tx=StateProperties=eyJUSUQiOiJmZmM4YmNhNy0wNjk4LTQwYzUtODRhZC1hZmQ2NDI0ZWY1ZGYifQ&amp;p=B2C_1_SignUp_SignIn_Web_Dev_English"
                    >Forgot your password?</a
                  >
                </div>
              </div>
              <div class="working"></div>

              <div class="buttons">
                <button id="next" type="submit" form="localAccountForm">
                  Sign in
                </button>
              </div>
            </div>
            <div class="divider">
              <h2>OR</h2>
            </div>
            <div class="create">
              <p>
                Don't have an account?<a
                  id="createAccount"
                  href="/unityssotest.onmicrosoft.com/B2C_1_SignUp_SignIn_Web_Dev_English/api/CombinedSigninAndSignup/unified?local=signup&amp;csrf_token=VWpMUVRzODUvVnRvNThoNVFXZUJrNDVBaTBES0lrZWdTOEJMd2F1M0x0VE1vYStLbWRtZWxrKzlodXVmd0UvQVFJMU5VNWVaQUhBUE9aamRKMXpMMXc9PTsyMDI0LTAzLTI2VDAwOjE5OjIxLjU1NzQzNTVaO0R2STRWMEw5aEk2aFdqSEcweVk2WWc9PTt7Ik9yY2hlc3RyYXRpb25TdGVwIjoxfQ==&amp;tx=StateProperties=eyJUSUQiOiJmZmM4YmNhNy0wNjk4LTQwYzUtODRhZC1hZmQ2NDI0ZWY1ZGYifQ&amp;p=B2C_1_SignUp_SignIn_Web_Dev_English"
                  >Sign up now</a
                >
              </p>
            </div>
          </form>
          <div class="divider">
            <h2>OR</h2>
          </div>
          <!-- /@remove -->
        </main>
        <div class="aside">
          <div class="space-y-4">
            <h2 class="heading text-4xl text-brand-turquoise">
              Don&#x2019;t have an account? Sign up today!
            </h2>
            <p class="body">
              By creating an account, you can easily review your transaction and
              donation history, access our magazine content with a subscription,
              and update your user information as needed.
            </p>
            <div class="actions">
              <a
                id="register-link"
                class="button button-blue font-semibold invisible"
                href=""
                >Register</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      ;((window, document) => {
        const $registerLink = document.getElementById('register-link')
        const $createAccount = document.getElementById('createAccount')

        if (!$registerLink || !$createAccount) return

        const href = $createAccount.getAttribute('href')
        $registerLink.setAttribute('href', href)
        $registerLink.classList.add('js-show')
        $createAccount.closest('.create').classList.add('js-hide')
      })(window, window.document, undefined)
      init()
    </script>
  </block>
</extends>
